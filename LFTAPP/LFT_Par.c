#define  PAR_GLOBALS
#include "includes.h"

INT16U const ParDefault[16][16] = 
{
	// 0
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 1
	{0x0001, 0x0001, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0001, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 2
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 3
	{0x79FD, 0x0190, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 4
	{   175,   1024,   1450, 0x0000, 0x0000,      1,     80,     80,	
	     50,    60,      60,     40,     50,     10,    200,     30},	
	// 5
	{   100,     25,     30,     60,      5,      0,      0,      0,	
	      0,      0,      0,      0,     25,     25,     30,    100},	
	// 6
	{0x0001, 0x0001, 0x0001, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 7
	{     5,      5,      1,     10,      0,      0,      0,      0,	
	      0,      0,      0,      0,      0,     20,     20,     20},
	// 8
	{     1,      0,      0,      0,     30,     40,     10,     50,	
	      3,      0,      0,     30,     30,     10,     30,      6},
	// 9
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 10
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 11
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 12
	{0x3A31, 0x3A3A, 0x3A32, 0x3A3A, 0x3A33, 0x3A3A, 0x3A34, 0x3A3A, 
	 0x3A35, 0x3A3A, 0x3A36, 0x3A3A, 0x3A37, 0x3A3A, 0x3A38, 0x3A3A},
	// 13
	{0x3A39, 0x3A3A, 0x3130, 0x3A3A, 0x3A31, 0x3A3A, 0x3132, 0x3A3A, 
	 0x3133, 0x3A3A, 0x3134, 0x3A3A, 0x3135, 0x3A3A, 0x3136, 0x3A3A},
	// 14	
	{0x3137, 0x3A3A, 0x3138, 0x3A3A, 0x3139, 0x3A3A, 0x3230, 0x3A3A, 
	 0x3231, 0x3A3A, 0x3232, 0x3A3A, 0x3233, 0x3A3A, 0x3234, 0x3A3A},
	// 15
	{0x3235, 0x3A3A, 0x3236, 0x3A3A, 0x3237, 0x3A3A, 0x3238, 0x3A3A, 
 	 0x3239, 0x3A3A, 0x3330, 0x3A3A, 0x3331, 0x3A3A, 0x3332, 0x3A3A},
};


INT16U const ParMax[16][16] = 
{
	// 0
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 1
	{   240,     10, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	      8,     10, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 2
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 3
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 4
	{   250,   5000,   3000, 0xFFFF, 0xFFFF,      5,     95,    150,	
	    400,    400,    400,    150,    400,    200,   1000,    500},// 50},
	// 5
	{   100,     50,     30,     60,      5, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,     25,     25,     30,    100},	
	// 6
	{    32,     32,     32, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 7
	{    30,     30,     30,     30, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,    100,     50,     50},
	// 8
	{     2,      2,      3,      1,    150,    200,    100,    300,	
	     30, 0xFFFF, 0xFFFF,    180,    180,    180,    180,     20},
	// 9
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 10
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	
	// 11
	{0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,	
	 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},	

	// 12
	{0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060,	
	 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060},	
	// 13
	{0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060,	
	 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060},	
	// 14	
	{0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060,	
	 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060},	
	// 15
	{0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060,	
	 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060, 0x6060},	
};




INT16U const ParMin[16][16] = 
{
	// 0
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 1
	{     0,      1, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	      0,      1, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 2
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 3
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 4
	{    30,     50,     50, 0x0000, 0x0000,      0,     30,     30,	
	     30,     40,     40,     20,     30,      1,      0,     10},
	// 5
	{    1,     10,     10,     10,      0, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000,      0,      0,      5,     10},	
	// 6
	{     1,      1,      1, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 7
	{     0,      0,      0,      0, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,     10,     10,     10},
	// 8
	{     0,      0,      0,      0,     10,     10,      5,     10,	
	      0, 0x0000, 0x0000,      5,      5,      5,      5,      0},
	// 9
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 10
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	
	// 11
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,	
	 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},	

	// 12
	{0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030,	
	 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030},	
	// 13
	{0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030,	
	 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030},	
	// 14	
	{0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030,	
	 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030},	
	// 15
	{0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030,	
	 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030, 0x3030},	
};

INT8U VerifyEE(void)
{
	INT8U i, j, event;
	INT16U rv;

	i = 0; event = 0;
	while(event == 0 && i < 16){
		WDTClear();
		j = 0;
		while(j < 16){
			WDTClear();
			rv = Register_Get(i * 16 + j);
			if(rv < ParMin[i][j] || rv > ParMax[i][j]){
				event = 1;
				break;
			}
			j++;
		}
		i++;
	}
	return event;
}

INT8U RestoreEE(void)
{
	INT8U i, j, event;
	INT16U rv;

	
	i = 0; event = 0;
	while(i < 16){
		WDTClear();
		j = 0;
		while(j < 16){
			WDTClear();
			Register_Set(i * 16 + j, ParDefault[i][j]);
			rv = Register_Get(i * 16 + j);
			if(rv != ParDefault[i][j]){
				//printf("error");
				event = 1;
			  	break;
			}
			j++;
		}
		i++;
	}
	return event;
}


